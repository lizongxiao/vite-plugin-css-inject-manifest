# vite-plugin-manifest-builder

??????? Vite ???????????? Chrome Extension ? `manifest.json` ????? CSS ????????????????????????????

## ????

- ? ??????? CSS ??? manifest.json
- ? ????? CSS ??????
- ? ??????????? content_scripts
- ? **???? manifest.json ??**????
- ? **???????????**????
- ? ????????
- ? ??? TypeScript ????
- ? ???????? (CJS/ESM)

## ??

```bash
npm install vite-plugin-manifest-builder
```

???? yarn?

```bash
yarn add vite-plugin-manifest-builder
```

## ????

### ????

```typescript
import { defineConfig } from 'vite'
import { manifestBuilderPlugin } from 'vite-plugin-manifest-builder'

export default defineConfig({
  plugins: [
    manifestBuilderPlugin()
  ]
})
```

### ????

```typescript
import { defineConfig } from 'vite'
import { manifestBuilderPlugin } from 'vite-plugin-manifest-builder'

export default defineConfig({
  plugins: [
    manifestBuilderPlugin({
      debug: true,
      cssPattern: /\.(css|scss|less)$/,
      targetScripts: ['content-scripts'],
      outDir: 'dist',
      manifestName: 'manifest.json',
      manifestOverrides: {
        description: '?????????',
        version: '1.0.1',
        name: '??????'
      }
    })
  ]
})
```

## ????

### `debug?: boolean`
???????????? `false`

```typescript
manifestBuilderPlugin({
  debug: true // ??????????
})
```

### `cssPattern?: RegExp`
??? CSS ?????????? `/\.css$/`

```typescript
manifestBuilderPlugin({
  cssPattern: /\.(css|scss|less)$/ // ?? CSS?SCSS?Less ??
})
```

### `targetScripts?: string[]`
????? CSS ? content_scripts????????????????

```typescript
manifestBuilderPlugin({
  targetScripts: ['content-scripts', 'background'] // ??????????????
})
```

### `outDir?: string`
???????? `'dist'`

```typescript
manifestBuilderPlugin({
  outDir: 'build' // ???????
})
```

### `manifestName?: string`
manifest.json ??????? `'manifest.json'`

```typescript
manifestBuilderPlugin({
  manifestName: 'extension-manifest.json' // ??? manifest ???
})
```

### `manifestSource?: string`
manifest.json ??????????????? `'manifest.json'`

```typescript
manifestBuilderPlugin({
  manifestSource: 'src/manifest.json' // ???? manifest ????
})
```

### `manifestOverrides?: Record<string, any>`
???? manifest ???????????????????????????

```typescript
manifestBuilderPlugin({
  manifestOverrides: {
    description: '?????????',
    version: '1.0.1',
    name: '?????????',
    // ??????
    permissions: ['storage', 'activeTab'],
    icons: {
      '16': 'icons/icon16.png',
      '48': 'icons/icon48.png',
      '128': 'icons/icon128.png'
    }
  }
})
```

## ????

1. **????**?????????????? CSS ??
2. **??????**??? `manifestOverrides` ??????? manifest ??
3. **????**???????????? content_scripts
4. **????**?? CSS ??????? manifest.json ? `css` ???
5. **????**????? manifest.json ??

## ????

### Chrome Extension ??

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import { manifestBuilderPlugin } from 'vite-plugin-manifest-builder'

export default defineConfig(({ mode }) => {
  const isDev = mode === 'development'
  
  return {
    plugins: [
      manifestBuilderPlugin({
        debug: isDev, // ????????
        cssPattern: /\.css$/,
        targetScripts: ['content-scripts'],
        manifestOverrides: {
          description: isDev ? '????' : '????',
          version: '1.0.0'
        }
      })
    ]
  }
})
```

### ?????

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import { manifestBuilderPlugin } from 'vite-plugin-manifest-builder'

export default defineConfig(({ mode }) => {
  return {
    plugins: [
      manifestBuilderPlugin({
        debug: mode === 'development',
        cssPattern: /\.(css|scss|less)$/,
        targetScripts: ['content-scripts', 'popup', 'options'],
        outDir: mode === 'production' ? 'dist' : 'dev-dist',
        manifestOverrides: {
          name: mode === 'production' ? '????' : '????',
          version: mode === 'production' ? '1.0.0' : '1.0.0-dev'
        }
      })
    ]
  }
})
```

## ????

1. **????**?????????????????? `enforce: 'post'`
2. **CSS ??**?????????????????? CSS ??
3. **????**???????????????????
4. **????**???? `closeBundle` ??????????????????
5. **????**?`manifestOverrides` ?? CSS ???????????????

## ????

### CSS ??????

1. ?? CSS ??????????????
2. ?? `cssPattern` ??????
3. ?? `debug` ????????

### ??????

1. ?? manifest.json ? `css` ?????
2. ?? CSS ????????
3. ??????????? CSS ??

### ?????

1. ?????????????
2. ?? `outDir` ? `manifestName` ??????
3. ?????????????

### ??????

1. ?? `manifestOverrides` ????????
2. ??? manifest.json ????
3. ?? `debug` ??????????

## ??

### ????

```bash
# ????
git clone https://github.com/your-username/vite-plugin-manifest-builder.git
cd vite-plugin-manifest-builder

# ????
npm install

# ????
npm run dev

# ??
npm run build
```

### ??

```bash
# ????
npm test

# ?????
npm run build && npm test
```

## ??

???? Issue ? Pull Request?

1. Fork ??
2. ?????? (`git checkout -b feature/amazing-feature`)
3. ???? (`git commit -m 'Add some amazing feature'`)
4. ????? (`git push origin feature/amazing-feature`)
5. ?? Pull Request

## ???

MIT License - ?? [LICENSE](LICENSE) ??????

## ????

### v1.0.0
- ????
- ???? CSS ????
- ???? manifest ????
- ????????
- ??? TypeScript ???? 
